!function t(e,i,n){function o(a,s){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return o(i||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){(function(i){"use strict";function n(t,e,i){for(var n="",o=i;o>0;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n}function o(t){var e=t.split(",");return[e[1],e[0],e[3],e[2]]}var r="undefined"!=typeof window?window.L:void 0!==i?i.L:null,a=t("fetch-jsonp/src/fetch-jsonp").default,s=t("bbox-intersect"),u=["Aerial","AerialWithLabels","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"];r.TileLayer.Bing=r.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=r.setOptions(this,t),u.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");var e=r.Util.template(r.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet});this._imageryProviders=[],this._attributions=[],this._fetch=a(e,{jsonpCallback:"jsonp",timeout:this.options.timeout}).then(function(t){return t.json()}).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),r.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return r.DomEvent.on(i,"load",r.bind(this._tileOnLoad,this,e,i)),r.DomEvent.on(i,"error",r.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch(function(t){console.error(t),e(t)}),i},getTileUrl:function(t){var e=n(t.x,t.y,t.z);return r.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture})},onAdd:function(t){t.on("moveend",this._updateAttribution,this),r.TileLayer.prototype.onAdd.call(this,t),this._attributions.forEach(function(e){t.attributionControl.addAttribution(e)}),this._updateAttribution()},onRemove:function(t){t.off("moveend",this._updateAttribution,this),this._attributions.forEach(function(e){t.attributionControl.removeAttribution(e)}),r.TileLayer.prototype.onRemove.call(this,t)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=r.Util.template(r.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return a(i,{jsonpCallback:"jsonp",timeout:this.options.timeout}).then(function(t){return t.json()}).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders||[],this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t=this._map;if(t&&t.attributionControl){var e=t.getZoom(),i=o(t.getBounds().toBBoxString());this._fetch.then(function(){var n=this._getAttributions(i,e),o=this._attributions;n.forEach(function(e){o.indexOf(e)>-1||t.attributionControl.addAttribution(e)}),o.filter(function(e){n.indexOf(e)>-1||t.attributionControl.removeAttribution(e)}),this._attributions=n}.bind(this))}},_getAttributions:function(t,e){return this._imageryProviders.reduce(function(i,n){for(var o=0;o<n.coverageAreas.length;o++)if(s(t,n.coverageAreas[o].bbox)&&e>=n.coverageAreas[o].zoomMin&&e<=n.coverageAreas[o].zoomMax)return i.push(n.attribution),i;return i},[])}}),r.tileLayer.bing=function(t){return new r.TileLayer.Bing(t)},e.exports=r.TileLayer.Bing}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bbox-intersect":2,"fetch-jsonp/src/fetch-jsonp":3}],2:[function(t,e,i){"use strict";e.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},{}],3:[function(t,e,i){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(t){try{delete window[t]}catch(e){window[t]=void 0}}function r(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t,a=e.timeout||s.timeout,u=e.jsonpCallback||s.jsonpCallback,l=void 0;return new Promise(function(s,c){var d=e.jsonpCallbackFunction||n(),h=u+"_"+d;window[d]=function(t){s({ok:!0,json:function(){return Promise.resolve(t)}}),l&&clearTimeout(l),r(h),o(d)},i+=-1===i.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+i+u+"="+d),e.charset&&f.setAttribute("charset",e.charset),f.id=h,document.getElementsByTagName("head")[0].appendChild(f),l=setTimeout(function(){c(new Error("JSONP request to "+t+" timed out")),o(d),r(h),window[d]=function(){o(d)}},a),f.onerror=function(){c(new Error("JSONP request to "+t+" failed")),o(d),r(h),l&&clearTimeout(l)}})}Object.defineProperty(i,"__esModule",{value:!0});var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};i.default=a},{}]},{},[1]);